{% extends 'layout.html.twig' %}

{% block header %}{# Reprend l'affiche de l'image d'accueil et du menu #}
  {{ parent() }}
{% endblock %} 

{% block reduction_image %}{# Affiche l'image d'accueil en taille reduite #}
  {{ parent() }} 
{% endblock %}

{% block index %}{# Vide pour ne pas afficher l'image en grande taille #}
{% endblock %}

{% block title %}Match du 11 juin 2017{% endblock %}


{% block content %}
{# FIL D'ARIANE #}
<ol class="breadcrumb">
  <li>Saison {{ NomderniereSaisonClub.nom }}</li>
  <li>Rencontre du {{ rencontre.date|date('d/m/Y') }}</li>
</ol>
  
 {# GOOGLEMAP #}  
 Lieu de la rencontre : <strong>{{ rencontre.lieu }}</strong>
<div style="width:700px;height:400px;" class="center-block"  id="googleMap"></div>
    
{% endblock %}

{% block javascripts %}
          {{ parent() }}
          <script src="https://maps.googleapis.com/maps/api/js?language=fr&key=AIzaSyBgsboaphCBp3sd_l3emIumeJiXQbvC7S0"></script>
    <script>
       var geocoder;
    var map;
    var address= '{{ rencontre.lieu }}';
    /*
    function TrouverADR()
    {
        geocoder = new google.maps.Geocoder();
        geocoder.geocode( { "address": adresse}, function(results, status) {
        console.log(status);
        console.log(google.maps.GeocoderStatus.OK);
        if (status == google.maps.GeocoderStatus.OK) {

                
                var strposition = results[0].geometry.location.toString();
                var latlng = new google.maps.LatLng(strposition);
                
                var mapOptions = {
                        zoom      : 15,
                        center    : latlng,
                        scrollwheel:false,
                        zoomControl: true,
                        scaleControl: true,
                        streetViewControl: true
                        }
                        
                map = new google.maps.Map(document.getElementById('googleMap'), mapOptions);	  
                map.setCenter(results[0].geometry.location);
                var marker = new google.maps.Marker({
                                    map: map,
                                    position: results[0].geometry.location
                                });
                }
                    
            }  );
        }
           

         
         //TrouverADR(adresse);
*/

  function initialize() {
    geocoder = new google.maps.Geocoder();
    var latlng = new google.maps.LatLng(-34.397, 150.644);
    var mapOptions = {
      zoom: 8,
      center: latlng
    }
    map = new google.maps.Map(document.getElementById('googleMap'), mapOptions);
  }

initialize();

  function codeAddress() {
    //var address = document.getElementById('address').value;
    geocoder.geocode( { 'address': address}, function(results, status) {
      if (status == 'OK') {
        map.setCenter(results[0].geometry.location);
        var marker = new google.maps.Marker({
            map: map,
            position: results[0].geometry.location
        });
      } else {
        alert('Geocode was not successful for the following reason: ' + status);
      }
    });
  }
  codeAddress();
  
    </script>    
    {% endblock  %}